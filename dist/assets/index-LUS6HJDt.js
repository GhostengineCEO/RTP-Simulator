import{j as e,c as t,C as s,a as r,b as a,P as i,A as n,M as o,d as l,H as c,S as d,e as m,f as x,g as p,T as h,h as u,m as g,i as y,k as f,U as b,l as w,X as v,W as j,n as N,o as S,G as k,p as C,Z as T,q as P,r as I,s as A,t as M,u as E,v as D,B as R,w as O,R as L,x as $,y as F,L as U,z as _,I as H,D as W,E as B,F as G,J as Y,K as z,N as q,O as V,Q as J}from"./components-cPVnpuy7.js";import{a as K,r as X,R as Z}from"./vendor-CzsvKnaC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Q={},ee=K;Q.createRoot=ee.createRoot,Q.hydrateRoot=ee.hydrateRoot;const te=e=>{switch(e){case"beginner":return"text-success bg-success/10 border-success/20";case"intermediate":return"text-warning bg-warning/10 border-warning/20";case"advanced":return"text-error bg-error/10 border-error/20";default:return"text-info bg-info/10 border-info/20"}},se=e=>{switch(e){case"network":default:return"text-info bg-info/10";case"security":return"text-error bg-error/10";case"hardware":return"text-warning bg-warning/10";case"software":return"text-success bg-success/10"}},re=({scenarios:m,onSelectScenario:x,userProgress:p})=>{const h=p.completedScenarios.length,u=m.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Welcome to IT Support Training"}),e.jsx("p",{className:"text-primary-300 text-lg mb-6",children:"Choose a scenario to practice your IT support skills"}),e.jsx("div",{className:"bg-primary-900/50 rounded-lg p-6 mb-8 border border-primary-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:h}),e.jsx("div",{className:"text-primary-300 text-sm",children:"Completed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-info",children:u-h}),e.jsx("div",{className:"text-primary-300 text-sm",children:"Remaining"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:p.totalScore}),e.jsx("div",{className:"text-primary-300 text-sm",children:"Total Score"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary-300",children:p.achievements.length}),e.jsx("div",{className:"text-primary-300 text-sm",children:"Achievements"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(n=>{const m=(e=>{switch(e){case"network":default:return o;case"security":return d;case"hardware":return c;case"software":return l}})(n.category),h=p.completedScenarios.includes(n.id);return e.jsxs("div",{className:"bg-primary-900/50 border border-primary-700 rounded-lg p-6 hover:bg-primary-800/50 transition-colors cursor-pointer group",onClick:()=>x(n),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:t("p-2 rounded-lg",se(n.category)),children:e.jsx(m,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center space-x-2",children:h?e.jsx(s,{className:"h-5 w-5 text-success"}):e.jsx(r,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2 group-hover:text-success transition-colors",children:n.title}),e.jsx("p",{className:"text-primary-300 text-sm mb-4 line-clamp-3",children:n.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t("px-2 py-1 rounded-full text-xs font-medium border",te(n.difficulty)),children:n.difficulty.charAt(0).toUpperCase()+n.difficulty.slice(1)}),e.jsxs("div",{className:"flex items-center text-primary-400 text-xs",children:[e.jsx(a,{className:"h-3 w-3 mr-1"}),n.estimatedTime]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-primary-400 mb-2",children:"Objectives:"}),e.jsxs("div",{className:"space-y-1",children:[n.objectives.slice(0,2).map((t,s)=>e.jsxs("div",{className:"text-xs text-primary-300 flex items-center",children:[e.jsx("div",{className:"h-1 w-1 bg-primary-400 rounded-full mr-2"}),t]},s)),n.objectives.length>2&&e.jsxs("div",{className:"text-xs text-primary-400",children:["+",n.objectives.length-2," more..."]})]})]}),e.jsxs("button",{className:"w-full mt-4 bg-success hover:bg-success/80 text-white py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center",children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),h?"Retry Scenario":"Start Scenario"]})]})]},n.id)})}),e.jsxs("div",{className:"bg-primary-900/50 rounded-lg p-6 border border-primary-700",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx(n,{className:"h-5 w-5 mr-2 text-warning"}),"Skill Progress"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(p.skillLevels).map(([t,s])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:t}),e.jsxs("span",{className:"text-sm text-primary-300",children:[s,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-800 rounded-full h-2",children:e.jsx("div",{className:"bg-success h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]},t))})]})]})},ae=({scenario:t,messages:r,onSendMessage:i,onBack:l,onToolAccess:c})=>{const[d,w]=X.useState([]),[v,j]=X.useState(!1),[N,S]=X.useState(!1),[k,C]=X.useState([]),[T,P]=X.useState(!1),I=X.useRef(null),A=X.useMemo(()=>{const e=m[t.id]||[];return new x(t,e)},[t]),[M,E]=X.useState(A.getCurrentState()),D={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95}},R={hover:{scale:1.02},tap:{scale:.98}},O={hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20}};X.useEffect(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[d,v]),X.useEffect(()=>{const e=m[t.id];e&&e.length>0&&setTimeout(()=>{const t={id:"client-1",type:"client",content:e[0].clientResponse,timestamp:new Date,sender:"Client",mood:M.clientMood};w([t]),setTimeout(()=>{S(!0),C(L())},1500)},1e3)},[t.id]);const L=()=>{const e=A.getNextOptimalAction(),s=A.getProgress();return s<25?[{id:"assess-professional",text:"I understand this is urgent. Let me gather some information to help resolve this quickly.",type:"professional",actionType:"response",scoreModifier:10},{id:"assess-empathetic",text:"I can see how frustrating this must be. I'm here to help get this fixed as quickly as possible.",type:"empathetic",actionType:"response",scoreModifier:8},{id:"assess-technical",text:"Let me start by checking our monitoring systems to identify the scope of this issue.",type:"technical",actionType:"tool_access",scoreModifier:"tool_access"===e?.type?15:5},{id:"assess-escalate",text:"This sounds critical. I'll escalate this immediately while investigating.",type:"escalation",actionType:"escalation",scoreModifier:"emergency"===t.severity?12:-5}]:s<50?[{id:"investigate-prtg",text:"Let me check the PRTG monitoring system to see what's happening.",type:"technical",actionType:"tool_access",scoreModifier:"check_prtg"===e?.id||"check_prtg_radius"===e?.id||"check_prtg_poe"===e?.id||"emergency_prtg"===e?.id?20:5},{id:"investigate-scope",text:"Can you tell me exactly which systems or users are affected?",type:"professional",actionType:"response",scoreModifier:10},{id:"investigate-timeline",text:"When did you first notice this issue? Any recent changes?",type:"technical",actionType:"response",scoreModifier:8},{id:"investigate-escalate",text:"I'm going to involve our Level 2 team immediately given the business impact.",type:"escalation",actionType:"escalation",scoreModifier:M.currentStep<2?-10:15}]:s<75?[{id:"diagnose-putty",text:"I need to access the system directly via terminal for detailed diagnostics.",type:"technical",actionType:"tool_access",scoreModifier:"tool_access"===e?.type&&M.toolsAccessed.prtgChecked?25:5},{id:"diagnose-analysis",text:"Based on the monitoring data, I can see the root cause. Let me investigate further.",type:"professional",actionType:"diagnosis",scoreModifier:M.toolsAccessed.prtgChecked?15:-5},{id:"diagnose-explain",text:"I can see what's wrong. This appears to be a hardware/infrastructure issue.",type:"empathetic",actionType:"diagnosis",scoreModifier:10},{id:"diagnose-escalate",text:"I've identified the issue and need to escalate to the appropriate team for resolution.",type:"escalation",actionType:"escalation",scoreModifier:"escalation"===e?.type?20:0}]:[{id:"resolve-escalate",text:"I've completed the diagnosis. This requires hardware replacement - escalating to Level 2.",type:"escalation",actionType:"escalation",scoreModifier:25},{id:"resolve-timeline",text:"I can provide you with a timeline for resolution and will monitor progress closely.",type:"professional",actionType:"response",scoreModifier:15},{id:"resolve-workaround",text:"While we work on the permanent fix, let me see if there are any temporary workarounds.",type:"empathetic",actionType:"diagnosis",scoreModifier:12},{id:"resolve-complete",text:"I've documented everything and initiated the repair process. You'll receive updates.",type:"professional",actionType:"escalation",scoreModifier:20}]},$=e=>{const t=A.accessTool(e),s={id:`tool-${Date.now()}`,type:"system",content:`🔧 Accessed ${e.toUpperCase()} - ${t.feedback} (Score: ${t.scoreChange>0?"+":""}${t.scoreChange})`,timestamp:new Date,sender:"System"};w(e=>[...e,s]),E(A.getCurrentState()),c&&c(e)},F=e=>{switch(e){case"client":default:return"justify-start";case"user":return"justify-end";case"system":return"justify-center"}},U=(e,t)=>{switch(e){case"client":return`max-w-sm lg:max-w-xl px-4 py-3 rounded-2xl ${"angry"===t||"panicked"===t?"bg-error":"frustrated"===t?"bg-warning text-black":"satisfied"===t||"grateful"===t?"bg-success":"bg-pink-600"} text-white`;case"user":return"max-w-sm lg:max-w-xl px-4 py-3 rounded-2xl bg-info text-white";case"system":return"max-w-xl px-4 py-3 rounded-2xl bg-primary-600 text-white text-center";default:return"max-w-sm lg:max-w-xl px-4 py-3 rounded-2xl bg-primary-700 text-white"}},_=t=>{const s={className:"h-4 w-4 flex-shrink-0"};switch(t){case"angry":case"panicked":return e.jsx(g.div,{animate:{rotate:[0,-5,5,-5,0]},transition:{repeat:1/0,duration:.5},children:e.jsx("span",{className:"text-lg",children:"😡"})});case"frustrated":return e.jsx("span",{className:"text-lg",children:"😤"});case"neutral":return e.jsx("span",{className:"text-lg",children:"😐"});case"cooperative":return e.jsx("span",{className:"text-lg",children:"🙂"});case"satisfied":return e.jsx("span",{className:"text-lg",children:"😊"});case"grateful":return e.jsx(g.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},children:e.jsx("span",{className:"text-lg",children:"😍"})});default:return e.jsx(b,{...s})}},H=e=>e>=20?"text-success":e>=10?"text-info":e>=0?"text-warning":"text-error";return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-6rem)]",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-primary-900/50 border border-primary-700 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-primary-300 hover:text-white transition-colors",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Back to Scenarios"]}),e.jsxs("div",{className:"flex items-center text-primary-400",children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),t.estimatedTime]})]}),e.jsx("h1",{className:"text-xl font-bold mb-2",children:t.title}),e.jsx("p",{className:"text-primary-300 text-sm mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-bold "+("emergency"===t.severity?"bg-error text-white animate-pulse":"critical"===t.severity?"bg-error/80 text-white":"high"===t.severity?"bg-warning text-black":"bg-info text-white"),children:t.severity.toUpperCase()}),e.jsxs("div",{className:"text-sm text-primary-300",children:[e.jsx("strong",{children:"Affected:"})," ",t.usersAffected]}),e.jsxs("div",{className:"text-sm text-primary-300",children:[e.jsx("strong",{children:"Mood:"}),e.jsx("span",{className:"ml-2 capitalize "+("angry"===M.clientMood||"panicked"===M.clientMood?"text-error":"frustrated"===M.clientMood?"text-warning":"satisfied"===M.clientMood||"grateful"===M.clientMood?"text-success":"text-info"),children:M.clientMood})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-primary-300",children:"Progress: "}),e.jsxs("span",{className:"text-info font-bold",children:[Math.round(A.getProgress()),"%"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-primary-300",children:"Score: "}),e.jsx("span",{className:`font-bold ${H(M.score.total)}`,children:M.score.total})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-primary-300",children:"Client Satisfaction: "}),e.jsxs("span",{className:"text-info font-bold",children:[M.score.clientSatisfactionRating.toFixed(1),"/5.0"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>$("prtg"),className:"flex items-center px-3 py-1 text-xs bg-primary-600 hover:bg-primary-500 rounded transition-colors",disabled:!A.canAccessTool("prtg"),children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),"PRTG"]}),e.jsxs("button",{onClick:()=>$("putty"),className:"flex items-center px-3 py-1 text-xs bg-primary-600 hover:bg-primary-500 rounded transition-colors",disabled:!A.canAccessTool("putty"),children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),"PuTTY"]})]})]})]}),e.jsx("div",{className:"flex-1 bg-primary-900/50 border border-primary-700 rounded-lg overflow-hidden flex flex-col min-h-[70vh]",children:e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-[65vh]",children:[e.jsx(u,{children:d.map(t=>{return e.jsx(g.div,{className:`flex ${F(t.type)}`,variants:D,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:e.jsxs("div",{className:"flex flex-col space-y-1 max-w-full",children:[e.jsx(g.div,{className:U(t.type,t.mood),whileHover:{scale:1.02},transition:{duration:.2},children:e.jsxs("div",{className:"flex items-start space-x-2",children:["client"===t.type&&e.jsx(g.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:_(t.mood)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(g.p,{className:"text-sm leading-relaxed whitespace-pre-line",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:t.content}),t.scoreImpact&&e.jsxs(g.div,{className:`text-xs mt-1 ${H(t.scoreImpact)}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:["Score: ",t.scoreImpact>0?"+":"",t.scoreImpact,t.isOptimal&&e.jsx(g.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:" ✓"})]})]})]})}),e.jsxs(g.div,{className:"text-xs text-primary-400 px-2 "+("user"===t.type?"text-right":"system"===t.type?"text-center":"text-left"),initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[t.sender," • ",(s=t.timestamp,s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))]})]})},t.id);var s})}),e.jsx(u,{children:v&&e.jsx(g.div,{className:"flex justify-start",variants:D,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(g.div,{className:"bg-pink-600 max-w-xs px-4 py-3 rounded-2xl",animate:{scale:[1,1.02,1]},transition:{repeat:1/0,duration:1.5},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(g.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:.6,delay:0}}),e.jsx(g.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:.6,delay:.15}}),e.jsx(g.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:.6,delay:.3}})]}),e.jsx("span",{className:"text-xs text-white opacity-75",children:"Client is typing..."})]})})})}),e.jsx(u,{children:N&&!T&&e.jsx(g.div,{className:"flex justify-center",variants:O,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(g.div,{className:"bg-warning max-w-2xl px-4 py-3 rounded-2xl text-black shadow-2xl",animate:{scale:[1,1.05,1]},children:[e.jsxs(g.div,{className:"text-sm font-medium mb-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:["Choose your response:",A.getNextOptimalAction()&&e.jsxs(g.div,{className:"text-xs text-primary-700 mt-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["💡 Hint: Consider ",A.getNextOptimalAction()?.action.toLowerCase()]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:k.map((t,s)=>e.jsx(g.button,{onClick:()=>(e=>{const t=A.processUserAction(e.text,e.actionType),s={id:`tech-${Date.now()}`,type:"user",content:e.text,timestamp:new Date,sender:"IT Support Tech",scoreImpact:t.scoreChange,isOptimal:t.scoreChange>0};if(w(e=>[...e,s]),S(!1),t.mistakes.length>0){const e={id:`feedback-${Date.now()}`,type:"system",content:`⚠️ ${t.feedback} (Score: ${t.scoreChange>0?"+":""}${t.scoreChange})`,timestamp:new Date,sender:"Training System"};w(t=>[...t,e])}const r=A.getCurrentState();E(r),j(!0);const a=A.advanceConversationStep();a&&setTimeout(()=>{j(!1);const e={id:`client-${Date.now()}`,type:"client",content:a.clientResponse,timestamp:new Date,sender:"Client",mood:r.clientMood};if(w(t=>[...t,e]),A.getProgress()>=100){const e=A.completeScenario();P(!0),setTimeout(()=>{const t={id:`completion-${Date.now()}`,type:"system",content:`🎉 Scenario Complete!\nFinal Score: ${e.finalScore}\nBadges Earned: ${e.badgesEarned.map(e=>e.name).join(", ")||"None"}\n\n${e.feedback.summary}`,timestamp:new Date,sender:"Training System"};w(e=>[...e,t])},1e3)}else setTimeout(()=>{S(!0),C(L())},2e3)},1500+1500*Math.random())})(t),className:"p-3 rounded-lg text-left text-sm transition-all duration-200 hover:shadow-lg active:scale-95 "+("professional"===t.type?"bg-info text-white hover:bg-info/80":"empathetic"===t.type?"bg-success text-white hover:bg-success/80":"technical"===t.type?"bg-primary-600 text-white hover:bg-primary-500":"bg-error text-white hover:bg-error/80"),variants:R,whileHover:"hover",whileTap:"tap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+.1*s},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"flex-1 pr-2",children:t.text}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs opacity-75 capitalize whitespace-nowrap",children:t.type}),t.scoreModifier&&e.jsxs(g.span,{className:"text-xs px-2 py-1 rounded-full whitespace-nowrap "+(t.scoreModifier>10?"bg-success/20 text-success":t.scoreModifier>0?"bg-info/20 text-info":"bg-error/20 text-error"),initial:{scale:0},animate:{scale:1},transition:{delay:.2+.1*s,type:"spring"},children:[t.scoreModifier>0?"+":"",t.scoreModifier]})]})]})},t.id))})]})})}),e.jsx(u,{children:T&&e.jsx(g.div,{className:"flex justify-center",variants:O,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(g.div,{className:"bg-success max-w-lg px-4 py-3 rounded-2xl text-white shadow-2xl",animate:{boxShadow:["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 10px rgba(34, 197, 94, 0)","0 0 0 0 rgba(34, 197, 94, 0)"]},transition:{repeat:1/0,duration:2},children:e.jsxs("div",{className:"text-center",children:[e.jsx(g.div,{animate:{rotate:[0,360]},transition:{duration:2,ease:"easeInOut"},children:e.jsx(n,{className:"h-8 w-8 mx-auto mb-2"})}),e.jsx(g.div,{className:"text-lg font-bold mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:"Scenario Complete! 🎉"}),e.jsx(g.button,{onClick:l,className:"bg-white text-success px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-gray-100 hover:scale-105 active:scale-95",variants:R,whileHover:"hover",whileTap:"tap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:"Return to Scenarios"})]})})})}),e.jsx("div",{ref:I})]})})]}),e.jsxs("div",{className:"w-full lg:w-80 space-y-4",children:[e.jsxs("div",{className:"bg-primary-900/50 border border-primary-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center",children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),"Current Status"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-300",children:"Tools Used:"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs "+(M.toolsAccessed.prtgChecked?"bg-success text-white":"bg-primary-600 text-primary-300"),children:"PRTG"}),e.jsx("span",{className:"px-2 py-1 rounded text-xs "+(M.toolsAccessed.puttyChecked?"bg-success text-white":"bg-primary-600 text-primary-300"),children:"PuTTY"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-300",children:"Resolution:"}),e.jsx("span",{className:"capitalize text-info",children:M.resolutionStatus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-300",children:"Escalation:"}),e.jsx("span",{className:"capitalize text-warning",children:M.escalationStatus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-300",children:"Mistakes:"}),e.jsx("span",{className:M.mistakesMade.length>0?"text-error":"text-success",children:M.mistakesMade.length})]})]})]}),e.jsxs("div",{className:"bg-primary-900/50 border border-primary-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center",children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),"Score Breakdown"]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(M.score.breakdown).map(([t,s])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-primary-300 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),e.jsx("span",{className:H(s),children:Math.round(s)})]},t)),e.jsx("hr",{className:"border-primary-600 my-2"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:H(M.score.total),children:Math.round(M.score.total)})]})]})]}),e.jsxs("div",{className:"bg-primary-900/50 border border-primary-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Next Steps"}),e.jsx("div",{className:"space-y-2",children:t.optimalPath.map((t,r)=>e.jsxs("div",{className:"flex items-center text-sm p-2 rounded "+(r<M.currentStep?"bg-success/20 text-success":r===M.currentStep?"bg-warning/20 text-warning":"bg-primary-700/50 text-primary-300"),children:[r<M.currentStep?e.jsx(s,{className:"h-4 w-4 mr-2 flex-shrink-0"}):r===M.currentStep?e.jsx(y,{className:"h-4 w-4 mr-2 flex-shrink-0"}):e.jsx("div",{className:"h-4 w-4 mr-2 flex-shrink-0 rounded-full border-2 border-primary-500"}),e.jsx("span",{className:"text-xs",children:t.action})]},t.id))})]})]})]})},ie=({onClose:t,scenarioId:r,onSensorClick:i})=>{const[n,o]=X.useState(null),[l,m]=X.useState("sensors");X.useEffect(()=>{o(x(r))},[r]);const x=e=>{const t=new Date,s=new Date(t.getTime()-3e5);switch(e){case"1":return{scenarioId:e,title:"Network Infrastructure Monitoring",sensors:[{id:"core-switch",name:"Core Switch (Cisco 9300)",type:"network",status:"DOWN",value:"OFFLINE",message:"Device not responding to SNMP queries",icon:"switch",lastCheck:s,downtime:"00:12:34"},{id:"network-traffic",name:"Network Traffic (Port 1-24)",type:"network",status:"DOWN",value:"0 Mbps",message:"No traffic detected on monitored ports",icon:"network",lastCheck:s,downtime:"00:12:34"},{id:"connected-devices",name:"Connected Devices",type:"network",status:"CRITICAL",value:"0/75",message:"No devices connected to network",icon:"network",lastCheck:s},{id:"uplink",name:"Uplink to ISP",type:"internet",status:"UP",value:"95.2 Mbps",message:"Internet connection stable",icon:"internet",lastCheck:t}],alerts:[{id:"alert-1",level:"critical",sensor:"Core Switch (Cisco 9300)",message:"Device down - SNMP timeout after 3 retry attempts",timestamp:s,acknowledged:!1},{id:"alert-2",level:"critical",sensor:"Network Traffic (Port 1-24)",message:"Traffic dropped to 0 Mbps - possible hardware failure",timestamp:s,acknowledged:!1},{id:"alert-3",level:"warning",sensor:"Connected Devices",message:"Device count dropped from 75 to 0 in 2 minutes",timestamp:s,acknowledged:!1}]};case"2":return{scenarioId:e,title:"Security Infrastructure Monitoring",sensors:[{id:"vpn-server",name:"VPN Server (Barracuda)",type:"security",status:"WARNING",value:"AUTH FAIL",message:"Authentication requests failing",icon:"security",lastCheck:s},{id:"radius-primary",name:"Primary RADIUS Server",type:"server",status:"DOWN",value:"OFFLINE",message:"Service not responding on port 1812",icon:"server",lastCheck:s,downtime:"00:08:15"},{id:"radius-backup",name:"Backup RADIUS Server",type:"server",status:"UP",value:"ONLINE",message:"Standby server operational",icon:"server",lastCheck:t},{id:"internet-connection",name:"Internet Connection",type:"internet",status:"UP",value:"98.5 Mbps",message:"WAN connection stable",icon:"internet",lastCheck:t}],alerts:[{id:"alert-1",level:"critical",sensor:"Primary RADIUS Server",message:"Service down - Authentication service unavailable",timestamp:s,acknowledged:!1},{id:"alert-2",level:"warning",sensor:"VPN Server (Barracuda)",message:"High authentication failure rate detected",timestamp:s,acknowledged:!1},{id:"alert-3",level:"info",sensor:"Backup RADIUS Server",message:"Backup server ready for failover activation",timestamp:t,acknowledged:!1}]};case"3":return{scenarioId:e,title:"Telephony System Monitoring",sensors:[{id:"phone-controller",name:"Mitel Phone Controller",type:"phone",status:"UP",value:"ONLINE",message:"Main controller operational",icon:"phone",lastCheck:t},{id:"poe-module-1",name:"PoE Module 1 (Ports 1-12)",type:"power",status:"UP",value:"145W/180W",message:"Power delivery normal",icon:"power",lastCheck:t},{id:"poe-module-2",name:"PoE Module 2 (Ports 13-24)",type:"power",status:"DOWN",value:"0W/180W",message:"Module failure - no power output",icon:"power",lastCheck:s,downtime:"00:15:42"},{id:"network-uplink",name:"Network Uplink",type:"network",status:"UP",value:"1 Gbps",message:"Network connectivity stable",icon:"network",lastCheck:t}],alerts:[{id:"alert-1",level:"critical",sensor:"PoE Module 2 (Ports 13-24)",message:"PoE module failure - 8 phones offline in accounting dept",timestamp:s,acknowledged:!1},{id:"alert-2",level:"warning",sensor:"PoE Module 1 (Ports 1-12)",message:"Power consumption at 80% capacity",timestamp:new Date(t.getTime()-6e5),acknowledged:!0}]};case"4":return{scenarioId:e,title:"Critical Infrastructure Status",sensors:[{id:"domain-controller-1",name:"Primary Domain Controller",type:"server",status:"CRITICAL",value:"CRITICAL",message:"System failure - blue screen detected",icon:"server",lastCheck:s,downtime:"00:23:17"},{id:"domain-controller-2",name:"Secondary Domain Controller",type:"server",status:"DOWN",value:"OFFLINE",message:"Service stopped - manual intervention required",icon:"server",lastCheck:s,downtime:"00:21:43"},{id:"storage-array",name:"Primary Storage Array",type:"storage",status:"CRITICAL",value:"DEGRADED",message:"Multiple disk failures - RAID degraded",icon:"storage",lastCheck:s},{id:"backup-storage",name:"Backup Storage System",type:"storage",status:"WARNING",value:"SLOW",message:"Performance degraded - high I/O wait",icon:"storage",lastCheck:t},{id:"network-core",name:"Core Network",type:"network",status:"WARNING",value:"INTERMITTENT",message:"Packet loss detected - 15% drop rate",icon:"network",lastCheck:t}],alerts:[{id:"alert-1",level:"critical",sensor:"Primary Domain Controller",message:"EMERGENCY: Domain Controller system failure - organization-wide impact",timestamp:s,acknowledged:!1},{id:"alert-2",level:"critical",sensor:"Secondary Domain Controller",message:"EMERGENCY: Backup DC offline - no failover available",timestamp:new Date(s.getTime()+12e4),acknowledged:!1},{id:"alert-3",level:"critical",sensor:"Primary Storage Array",message:"EMERGENCY: Storage array degraded - data at risk",timestamp:new Date(s.getTime()+6e4),acknowledged:!1},{id:"alert-4",level:"warning",sensor:"Core Network",message:"Network instability detected - investigate immediately",timestamp:t,acknowledged:!1}]};default:return{scenarioId:e,title:"Network Monitoring Dashboard",sensors:[],alerts:[]}}},p=e=>{switch(e){case"UP":return"text-success bg-success/10 border-success/20";case"DOWN":case"CRITICAL":return"text-error bg-error/10 border-error/20";case"WARNING":case"TIMEOUT":return"text-warning bg-warning/10 border-warning/20";default:return"text-primary-400 bg-primary-400/10 border-primary-400/20"}},h=e=>{switch(e){case"critical":return"text-error bg-error/10 border-error/30";case"warning":return"text-warning bg-warning/10 border-warning/30";case"info":return"text-info bg-info/10 border-info/30";default:return"text-primary-400 bg-primary-400/10 border-primary-400/30"}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-900 border border-primary-700 rounded-lg w-full max-w-7xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-primary-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[e.jsx(w,{className:"h-6 w-6 mr-2 text-info"}),"PRTG Network Monitor"]}),e.jsx("p",{className:"text-primary-400 text-sm mt-1",children:n.title})]}),e.jsx("button",{onClick:t,className:"text-primary-400 hover:text-white transition-colors",children:e.jsx(v,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex border-b border-primary-700",children:[e.jsxs("button",{onClick:()=>m("sensors"),className:"flex-1 px-6 py-3 text-sm font-medium transition-colors "+("sensors"===l?"bg-primary-800 text-white border-b-2 border-info":"text-primary-300 hover:text-white hover:bg-primary-800"),children:["Sensors (",n.sensors.length,")"]}),e.jsxs("button",{onClick:()=>m("alerts"),className:"flex-1 px-6 py-3 text-sm font-medium transition-colors "+("alerts"===l?"bg-primary-800 text-white border-b-2 border-info":"text-primary-300 hover:text-white hover:bg-primary-800"),children:["Alerts (",n.alerts.filter(e=>!e.acknowledged).length,")"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)] scrollbar-thin",children:["sensors"===l&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.sensors.map(t=>{const r=(e=>{switch(e){case"UP":default:return s;case"DOWN":return S;case"WARNING":case"CRITICAL":return N;case"TIMEOUT":return a;case"OFFLINE":return j}})(t.status),n=(e=>{switch(e){case"network":return P;case"server":default:return w;case"power":return T;case"storage":return c;case"phone":return C;case"security":return d;case"internet":return k}})(t.type);return e.jsxs("div",{onClick:()=>(e=>{i&&i(e)})(t),className:`bg-primary-800/30 border rounded-lg p-4 cursor-pointer hover:bg-primary-800/50 transition-all ${p(t.status)}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-5 w-5 text-info"}),e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium ${p(t.status)}`,children:[e.jsx(r,{className:"h-3 w-3"}),e.jsx("span",{children:t.status})]})]}),t.downtime&&e.jsx("div",{className:"text-xs text-error font-mono",children:t.downtime})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:t.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold",children:t.value}),e.jsx("p",{className:"text-sm text-primary-300 line-clamp-2",children:t.message}),e.jsxs("div",{className:"text-xs text-primary-400 flex items-center space-x-1",children:[e.jsx(a,{className:"h-3 w-3"}),e.jsxs("span",{children:["Last check: ",t.lastCheck.toLocaleTimeString()]})]})]})]},t.id)})}),"alerts"===l&&e.jsx("div",{className:"space-y-4",children:n.alerts.map(t=>e.jsx("div",{className:`border rounded-lg p-4 ${h(t.level)} ${t.acknowledged?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium uppercase ${h(t.level)}`,children:t.level}),e.jsx("span",{className:"text-sm font-medium",children:t.sensor})]}),e.jsx("p",{className:"text-sm mb-2",children:t.message}),e.jsxs("div",{className:"text-xs text-primary-400 flex items-center space-x-1",children:[e.jsx(a,{className:"h-3 w-3"}),e.jsx("span",{children:t.timestamp.toLocaleString()}),t.acknowledged&&e.jsx("span",{className:"ml-4 text-success",children:"• Acknowledged"})]})]}),!t.acknowledged&&e.jsx("button",{className:"text-xs px-3 py-1 bg-primary-700 hover:bg-primary-600 rounded transition-colors",children:"Acknowledge"})]})},t.id))})]}),e.jsx("div",{className:"border-t border-primary-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-primary-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last updated: ",(new Date).toLocaleTimeString()]})]}),e.jsx("div",{className:"text-xs",children:"Click sensors for detailed diagnostics • Auto-refresh: 30s"})]})})]})}):null},ne=({onClose:t,scenarioId:s="1"})=>{const[r,a]=X.useState([]),[i,n]=X.useState(""),[o,l]=X.useState(!1),[c,d]=X.useState(!1),m=X.useRef(null),x=X.useRef(null),p={1:{ip:"192.168.1.1",hostname:"CISCO-SW-CORE-01",device:"Cisco Catalyst 2960-X",commands:{"show power":()=>[{content:"Power Supply Status:",color:"white"},{content:"",color:"green"},{content:"PS1: FAILED - No AC input detected",color:"red"},{content:"PS2: OK - Providing 740W",color:"green"},{content:"",color:"green"},{content:"WARNING: Redundancy lost - Single power supply failure",color:"yellow"},{content:"System running on single power supply",color:"yellow"}],"show interfaces":()=>[{content:"Interface Status Summary:",color:"white"},{content:"",color:"green"},{content:"Gi0/1    err-disabled    Power failure detected",color:"red"},{content:"Gi0/2    err-disabled    Power failure detected",color:"red"},{content:"Gi0/3    err-disabled    Power failure detected",color:"red"},{content:"Gi0/4    err-disabled    Power failure detected",color:"red"},{content:"Gi0/5-24 err-disabled    Power failure detected",color:"red"},{content:"",color:"green"},{content:"All user ports offline due to power subsystem failure",color:"red"}],"show log":()=>[{content:"System Log - Last 20 entries:",color:"white"},{content:"",color:"green"},{content:"14:32:15: %POWER-3-SUPPLY_FAIL: Power supply 1 failed",color:"red"},{content:"14:32:16: %LINEPROTO-5-UPDOWN: Line protocol on interfaces changed to down",color:"yellow"},{content:"14:32:17: %LINK-3-UPDOWN: All access ports forced down",color:"red"},{content:"14:32:18: %SYS-1-POWER_REDUNDANCY_LOST: Power redundancy lost",color:"red"},{content:"14:32:19: %SNMP-3-AUTHFAIL: Authentication failure from PRTG monitor",color:"yellow"},{content:"",color:"green"},{content:"CRITICAL: Hardware replacement required immediately",color:"red"}],help:()=>[{content:"Available PuTTY Commands:",color:"white"},{content:"",color:"green"},{content:"show power      - Display power supply status",color:"green"},{content:"show interfaces - Show interface status",color:"green"},{content:"show log        - Display system log entries",color:"green"},{content:"help            - Show this help menu",color:"green"},{content:"exit            - Close PuTTY session",color:"green"}]}},2:{ip:"10.0.0.5",hostname:"BARRACUDA-VPN-01",device:"Barracuda CloudGen Firewall",commands:{"show sessions":()=>[{content:"VPN Session Status:",color:"white"},{content:"",color:"green"},{content:"Active Sessions: 0/50",color:"red"},{content:"Failed Authentications: 23 (last 10 minutes)",color:"red"},{content:"",color:"green"},{content:"Recent Failed Connections:",color:"yellow"},{content:"user: jdoe@company.com - Auth failure at 14:28:33",color:"red"},{content:"user: msmith@company.com - Auth failure at 14:29:15",color:"red"},{content:"user: bwilson@company.com - Auth failure at 14:30:42",color:"red"},{content:"",color:"green"},{content:"All authentication attempts failing to primary RADIUS",color:"red"}],"test radius":()=>[{content:"RADIUS Server Connectivity Test:",color:"white"},{content:"",color:"green"},{content:"Testing Primary RADIUS (172.16.1.20)...",color:"yellow"},{content:"FAILED - Connection timeout after 30 seconds",color:"red"},{content:"Primary RADIUS server is DOWN",color:"red"},{content:"",color:"green"},{content:"Testing Backup RADIUS (172.16.1.21)...",color:"yellow"},{content:"SUCCESS - Authentication test passed",color:"green"},{content:"Backup RADIUS server is ONLINE",color:"green"},{content:"",color:"green"},{content:"RECOMMENDATION: Switch to backup RADIUS server",color:"yellow"}],help:()=>[{content:"Available PuTTY Commands:",color:"white"},{content:"",color:"green"},{content:"show sessions   - Display VPN session status",color:"green"},{content:"test radius     - Test RADIUS connectivity",color:"green"},{content:"help            - Show this help menu",color:"green"},{content:"exit            - Close PuTTY session",color:"green"}]}},3:{ip:"172.16.1.10",hostname:"MITEL-PBX-01",device:"Mitel MiVoice Business",commands:{"show phones":()=>[{content:"IP Phone Status by Department:",color:"white"},{content:"",color:"green"},{content:"ACCOUNTING DEPARTMENT:",color:"yellow"},{content:"Phone 2001 (Ext.201): OFFLINE - No PoE power",color:"red"},{content:"Phone 2002 (Ext.202): OFFLINE - No PoE power",color:"red"},{content:"Phone 2003 (Ext.203): OFFLINE - No PoE power",color:"red"},{content:"Phone 2004 (Ext.204): OFFLINE - No PoE power",color:"red"},{content:"Phone 2005 (Ext.205): OFFLINE - No PoE power",color:"red"},{content:"Phone 2006 (Ext.206): OFFLINE - No PoE power",color:"red"},{content:"Phone 2007 (Ext.207): OFFLINE - No PoE power",color:"red"},{content:"Phone 2008 (Ext.208): OFFLINE - No PoE power",color:"red"},{content:"",color:"green"},{content:"All accounting phones offline - PoE module failure",color:"red"}],"show poe":()=>[{content:"Power over Ethernet Status:",color:"white"},{content:"",color:"green"},{content:"PoE Module 1: FAILED - Hardware fault detected",color:"red"},{content:"PoE Module 2: OK - Providing power to other departments",color:"green"},{content:"",color:"green"},{content:"Module 1 Port Status (Accounting Dept):",color:"yellow"},{content:"Ports 1-8: NO POWER - Module failure",color:"red"},{content:"",color:"green"},{content:"ERROR: PoE Module 1 requires replacement",color:"red"},{content:"Contact facilities team for hardware swap",color:"yellow"}],help:()=>[{content:"Available PuTTY Commands:",color:"white"},{content:"",color:"green"},{content:"show phones     - List phone status by department",color:"green"},{content:"show poe        - Display PoE module status",color:"green"},{content:"help            - Show this help menu",color:"green"},{content:"exit            - Close PuTTY session",color:"green"}]}},4:{ip:"10.0.0.1",hostname:"DC-PRIMARY-01",device:"Windows Server 2019",commands:{dcdiag:()=>[{content:"Domain Controller Diagnostic Tool",color:"white"},{content:"",color:"green"},{content:"Testing server: DC-PRIMARY-01",color:"yellow"},{content:"",color:"green"},{content:"Starting test: Connectivity",color:"white"},{content:"   FAILED - Cannot connect to domain controller",color:"red"},{content:"",color:"green"},{content:"Starting test: Advertising",color:"white"},{content:"   FAILED - Not advertising as domain controller",color:"red"},{content:"",color:"green"},{content:"Starting test: Services",color:"white"},{content:"   FAILED - Critical AD services not responding",color:"red"},{content:"",color:"green"},{content:"CRITICAL FAILURE: Domain Controller is completely offline",color:"red"},{content:"All domain authentication services unavailable",color:"red"}],"show storage":()=>[{content:"Storage Array Status Check:",color:"white"},{content:"",color:"green"},{content:"RAID Controller: LSI MegaRAID SAS 9361-8i",color:"white"},{content:"",color:"green"},{content:"Virtual Drive 0: FAILED - Critical disk failure",color:"red"},{content:"Virtual Drive 1: DEGRADED - Multiple disk errors",color:"red"},{content:"",color:"green"},{content:"Physical Disks:",color:"yellow"},{content:"Disk 0: FAILED - Unrecoverable read errors",color:"red"},{content:"Disk 1: FAILED - Drive not responding",color:"red"},{content:"Disk 2: PREDICTIVE FAILURE - Replace immediately",color:"yellow"},{content:"Disk 3: ONLINE - Good",color:"green"},{content:"",color:"green"},{content:"EMERGENCY: Catastrophic storage failure detected",color:"red"},{content:"Data recovery procedures required immediately",color:"red"}],help:()=>[{content:"Available PuTTY Commands:",color:"white"},{content:"",color:"green"},{content:"dcdiag          - Run domain controller diagnostics",color:"green"},{content:"show storage    - Display RAID storage status",color:"green"},{content:"help            - Show this help menu",color:"green"},{content:"exit            - Close PuTTY session",color:"green"}]}}},u=p[s]||p[1];X.useEffect(()=>{const e=setTimeout(()=>{a([{content:"PuTTY SSH Client v0.77",color:"green"},{content:"",color:"green"},{content:`Connecting to ${u.ip} port 22...`,color:"yellow"},{content:"Connection established.",color:"green"},{content:"",color:"green"},{content:`Connected to ${u.hostname}`,color:"white"},{content:`Device: ${u.device}`,color:"white"},{content:"",color:"green"},{content:"Authentication successful.",color:"green"},{content:"",color:"green"},{content:`${u.hostname}#`,color:"green"}]),d(!0)},500);return()=>clearTimeout(e)},[u]),X.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[r]),X.useEffect(()=>{x.current&&!o&&c&&x.current.focus()},[o,c]);const g=e=>{switch(e){case"red":return"text-red-400";case"yellow":return"text-yellow-400";case"white":return"text-white";default:return"text-green-400"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-black border-2 border-gray-600 rounded-lg shadow-2xl transition-all "+(o?"w-96 h-16":"w-full max-w-5xl h-[85vh]"),children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-t-lg border-b border-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4 text-green-400"}),e.jsxs("span",{className:"text-white font-mono text-sm",children:[u.hostname," - PuTTY"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>l(!o),className:"text-gray-400 hover:text-white transition-colors p-1 text-xs",children:o?e.jsx(I,{className:"h-3 w-3"}):e.jsx(A,{className:"h-3 w-3"})}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-1 text-xs",children:e.jsx(v,{className:"h-3 w-3"})})]})]}),!o&&e.jsxs("div",{className:"flex flex-col h-[calc(85vh-48px)]",children:[e.jsx("div",{className:"px-3 py-1 bg-gray-900 border-b border-gray-700",children:e.jsxs("span",{className:"text-green-400 font-mono text-xs",children:["SSH: ",u.ip,":22 - Connected"]})}),e.jsxs("div",{ref:m,className:"flex-1 p-4 font-mono text-sm bg-black overflow-y-auto",style:{fontFamily:'Consolas, "Courier New", monospace',backgroundColor:"#000000"},children:[r.map((t,s)=>e.jsx("div",{className:`whitespace-pre-wrap ${g(t.color)}`,children:t.content},s)),c&&e.jsxs("form",{onSubmit:e=>{e.preventDefault(),c&&((e=>{const s=e.trim().toLowerCase();if(!s)return;if(a(e=>[...e,{content:`${u.hostname}# ${s}`,color:"white"}]),"exit"===s)return a(e=>[...e,{content:"",color:"green"},{content:"Connection to host lost.",color:"yellow"},{content:"PuTTY session terminated.",color:"green"}]),void setTimeout(()=>t(),1500);const r=u.commands[s];if(r){const e=r();a(t=>[...t,...e,{content:"",color:"green"}])}else a(e=>[...e,{content:`Command '${s}' not recognized`,color:"red"},{content:'Type "help" for available commands',color:"yellow"},{content:"",color:"green"}])})(i),n(""))},className:"flex items-center",children:[e.jsxs("span",{className:"text-green-400",children:[u.hostname,"# "]}),e.jsx("input",{ref:x,type:"text",value:i,onChange:e=>n(e.target.value),className:"flex-1 bg-transparent text-white outline-none ml-1",style:{fontFamily:'Consolas, "Courier New", monospace'},autoComplete:"off",spellCheck:!1})]})]})]})]})})},oe=({userProgress:t,scenarios:r,onClose:i})=>{const o=t.completedScenarios.length,l=r.length,c=o/l*100,d=e=>e>=80?"text-success bg-success/10":e>=60?"text-warning bg-warning/10":e>=40?"text-info bg-info/10":"text-error bg-error/10",m=e=>e>=90?"Expert":e>=70?"Advanced":e>=50?"Intermediate":e>=30?"Beginner":"Novice",x=[{id:"first-steps",title:"First Steps",description:"Complete your first scenario",icon:M,unlocked:o>=1,progress:Math.min(o,1),target:1},{id:"problem-solver",title:"Problem Solver",description:"Complete 3 scenarios",icon:s,unlocked:o>=3,progress:Math.min(o,3),target:3},{id:"it-specialist",title:"IT Specialist",description:"Complete 5 scenarios",icon:n,unlocked:o>=5,progress:Math.min(o,5),target:5},{id:"network-guru",title:"Network Guru",description:"Reach 80% skill level in Network",icon:f,unlocked:t.skillLevels.network>=80,progress:t.skillLevels.network,target:80},{id:"security-expert",title:"Security Expert",description:"Reach 80% skill level in Security",icon:E,unlocked:t.skillLevels.security>=80,progress:t.skillLevels.security,target:80},{id:"hardware-master",title:"Hardware Master",description:"Reach 80% skill level in Hardware",icon:E,unlocked:t.skillLevels.hardware>=80,progress:t.skillLevels.hardware,target:80}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-primary-900 border border-primary-700 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-primary-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[e.jsx(f,{className:"h-6 w-6 mr-2 text-success"}),"Progress Tracker"]}),e.jsx("p",{className:"text-primary-400 text-sm mt-1",children:"Track your learning progress and achievements"})]}),e.jsx("button",{onClick:i,className:"text-primary-400 hover:text-white transition-colors",children:e.jsx(v,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)] scrollbar-thin space-y-6",children:[e.jsxs("div",{className:"bg-primary-800/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overall Progress"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-success mb-2",children:o}),e.jsx("div",{className:"text-primary-300",children:"Completed Scenarios"}),e.jsxs("div",{className:"text-sm text-primary-400",children:["out of ",l]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-warning mb-2",children:t.totalScore}),e.jsx("div",{className:"text-primary-300",children:"Total Score"}),e.jsx("div",{className:"text-sm text-primary-400",children:"points earned"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-info mb-2",children:[c.toFixed(0),"%"]}),e.jsx("div",{className:"text-primary-300",children:"Completion Rate"}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-info h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]})]})]}),e.jsxs("div",{className:"bg-primary-800/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Skill Levels"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(t.skillLevels).map(([t,s])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:t}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full inline-block ${d(s)}`,children:m(s)})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xl font-bold",children:[s,"%"]})})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-3",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-300 "+(s>=80?"bg-success":s>=60?"bg-warning":s>=40?"bg-info":"bg-error"),style:{width:`${s}%`}})}),e.jsxs("div",{className:"text-xs text-primary-400",children:["Next milestone: ",s<100?10*Math.ceil(s/10):100,"%"]})]},t))})]}),e.jsxs("div",{className:"bg-primary-800/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(t=>{const r=t.icon,a=t.target>0?t.progress/t.target*100:0;return e.jsx("div",{className:"border rounded-lg p-4 transition-all "+(t.unlocked?"border-success/50 bg-success/5":"border-primary-600 bg-primary-800/30"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+(t.unlocked?"bg-success/20":"bg-primary-700"),children:e.jsx(r,{className:"h-5 w-5 "+(t.unlocked?"text-success":"text-primary-400")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium "+(t.unlocked?"text-success":"text-primary-300"),children:t.title}),e.jsx("div",{className:"text-sm text-primary-400 mb-2",children:t.description}),!t.unlocked&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[t.progress,"/",t.target]})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2",children:e.jsx("div",{className:"bg-warning h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(a,100)}%`}})})]}),t.unlocked&&e.jsxs("div",{className:"flex items-center text-xs text-success",children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),"Unlocked!"]})]})]})},t.id)})})]}),e.jsxs("div",{className:"bg-primary-800/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[r.filter(e=>t.completedScenarios.includes(e.id)).map((t,r)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-primary-700/50 rounded-lg",children:[e.jsx(s,{className:"h-5 w-5 text-success"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.title}),e.jsxs("div",{className:"text-sm text-primary-400",children:["Completed • ",t.category," • ",t.difficulty]})]}),e.jsxs("div",{className:"text-xs text-primary-400 flex items-center",children:[e.jsx(a,{className:"h-3 w-3 mr-1"}),t.estimatedTime]})]},t.id)),0===o&&e.jsx("div",{className:"text-center text-primary-400 py-6",children:"No completed scenarios yet. Start your first scenario to begin tracking your progress!"})]})]})]})]})})},le=({completion:t,onTryAgain:r,onNextScenario:n,onReturnHome:o,availableNextScenarios:l})=>{const[c,d]=X.useState("summary"),[m,x]=X.useState(!1);X.useEffect(()=>{t.finalScore>=80&&(x(!0),setTimeout(()=>x(!1),3e3))},[t.finalScore]);const p=e=>e>=90?"text-green-400":e>=70?"text-blue-400":e>=50?"text-yellow-400":"text-red-400";return e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(g.div,{className:"bg-primary-900 border border-primary-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[e.jsx(u,{children:m&&e.jsx(g.div,{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[...Array(20)].map((t,s)=>e.jsx(g.div,{className:"absolute text-2xl",initial:{x:100*Math.random()+"%",y:"100%",rotate:0,opacity:1},animate:{y:"-20%",rotate:360,opacity:0},transition:{duration:3,delay:.1*s,ease:"easeOut"},children:["🎉","🎊","⭐","🏆","🥇"][s%5]},s))})}),e.jsxs("div",{className:"p-6 border-b border-primary-700",children:[e.jsxs(g.div,{className:"text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"text-4xl mb-2",children:(b=t.finalScore,b>=95?"🏆":b>=90?"🥇":b>=80?"🥈":b>=70?"🥉":b>=60?"⭐":"📝")}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Scenario Complete!"}),e.jsxs("div",{className:`text-3xl font-bold mb-2 ${p(t.finalScore)}`,children:[t.finalScore,"/100"]}),e.jsx("div",{className:"text-primary-300",children:"excellent"===t.performanceSummary.overall?"Outstanding Performance!":"good"===t.performanceSummary.overall?"Great Job!":"satisfactory"===t.performanceSummary.overall?"Well Done!":"needs_improvement"===t.performanceSummary.overall?"Keep Learning!":"Try Again!"})]}),e.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:[{key:"summary",label:"Summary",icon:E},{key:"details",label:"Details",icon:y},{key:"comparison",label:"Path Analysis",icon:f}].map(({key:t,label:s,icon:r})=>e.jsxs("button",{onClick:()=>d(t),className:"flex items-center px-4 py-2 rounded-lg transition-colors "+(c===t?"bg-blue-600 text-white":"bg-primary-700 text-primary-300 hover:bg-primary-600 hover:text-white"),children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),s]},t))})]}),e.jsx("div",{className:"p-6",children:e.jsxs(u,{mode:"wait",children:["summary"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${(e=>e>=90?"bg-green-500/10 border-green-500/20":e>=70?"bg-blue-500/10 border-blue-500/20":e>=50?"bg-yellow-500/10 border-yellow-500/20":"bg-red-500/10 border-red-500/20")(t.finalScore)}`,children:[e.jsx(E,{className:"h-8 w-8 mb-2 text-yellow-400"}),e.jsx("div",{className:"text-sm text-primary-300",children:"Final Score"}),e.jsx("div",{className:`text-2xl font-bold ${p(t.finalScore)}`,children:t.finalScore})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-blue-500/10 border-blue-500/20",children:[e.jsx(a,{className:"h-8 w-8 mb-2 text-blue-400"}),e.jsx("div",{className:"text-sm text-primary-300",children:"Time Taken"}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(h=t.totalTimeElapsed,`${Math.floor(h/60)}m ${h%60}s`)})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-purple-500/10 border-purple-500/20",children:[e.jsx(M,{className:"h-8 w-8 mb-2 text-purple-400"}),e.jsx("div",{className:"text-sm text-primary-300",children:"Client Satisfaction"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[t.clientSatisfactionScore,"/5"]})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-green-500/10 border-green-500/20",children:[e.jsx(y,{className:"h-8 w-8 mb-2 text-green-400"}),e.jsx("div",{className:"text-sm text-primary-300",children:"Efficiency"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[t.optimalPathComparison.efficiencyPercentage,"%"]})]})]}),t.badges.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Badges Earned"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.badges.map(s=>e.jsxs(g.div,{className:"flex items-center p-3 bg-primary-800 border border-primary-600 rounded-lg",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t.badges.indexOf(s)},children:[e.jsx("div",{className:"text-2xl mr-3",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:s.name}),e.jsx("div",{className:"text-sm text-primary-300",children:s.description}),e.jsx("div",{className:"text-xs mt-1 px-2 py-1 rounded-full inline-block "+("legendary"===s.rarity?"bg-yellow-500/20 text-yellow-400":"epic"===s.rarity?"bg-purple-500/20 text-purple-400":"rare"===s.rarity?"bg-blue-500/20 text-blue-400":"uncommon"===s.rarity?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:s.rarity.charAt(0).toUpperCase()+s.rarity.slice(1)})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-blue-400"}),"Performance Breakdown"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-primary-300",children:"Communication"}),e.jsxs("span",{className:"text-sm text-white",children:[t.performanceSummary.communicationScore,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2",children:e.jsx(g.div,{className:"bg-blue-500 h-2 rounded-full",initial:{width:0},animate:{width:`${t.performanceSummary.communicationScore}%`},transition:{delay:.3,duration:.8}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-primary-300",children:"Technical Accuracy"}),e.jsxs("span",{className:"text-sm text-white",children:[t.performanceSummary.technicalAccuracy,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2",children:e.jsx(g.div,{className:"bg-green-500 h-2 rounded-full",initial:{width:0},animate:{width:`${t.performanceSummary.technicalAccuracy}%`},transition:{delay:.4,duration:.8}})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-primary-300",children:"Time Efficiency"}),e.jsxs("span",{className:"text-sm text-white",children:[t.performanceSummary.timeEfficiency,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2",children:e.jsx(g.div,{className:"bg-yellow-500 h-2 rounded-full",initial:{width:0},animate:{width:`${t.performanceSummary.timeEfficiency}%`},transition:{delay:.5,duration:.8}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-primary-300",children:"Troubleshooting"}),e.jsxs("span",{className:"text-sm text-white",children:[t.performanceSummary.troubleshootingMethodology,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-700 rounded-full h-2",children:e.jsx(g.div,{className:"bg-purple-500 h-2 rounded-full",initial:{width:0},animate:{width:`${t.performanceSummary.troubleshootingMethodology}%`},transition:{delay:.6,duration:.8}})})]})]})]})]})]},"summary"),"details"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(s,{className:"h-5 w-5 mr-2 text-green-400"}),"What You Did Well"]}),e.jsx("div",{className:"space-y-2",children:t.performanceSummary.strengths.map((t,r)=>e.jsxs(g.div,{className:"flex items-start p-3 bg-green-500/10 border border-green-500/20 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r},children:[e.jsx(s,{className:"h-4 w-4 mt-1 mr-3 text-green-400 flex-shrink-0"}),e.jsx("span",{className:"text-green-100",children:t})]},r))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Areas for Improvement"]}),e.jsx("div",{className:"space-y-2",children:t.areasForImprovement.map((t,s)=>e.jsxs(g.div,{className:"flex items-start p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:[e.jsx(N,{className:"h-4 w-4 mt-1 mr-3 text-yellow-400 flex-shrink-0"}),e.jsx("span",{className:"text-yellow-100",children:t})]},s))})]}),t.nextRecommendations.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-blue-400"}),"Recommended Next Steps"]}),e.jsx("div",{className:"space-y-2",children:t.nextRecommendations.map((t,s)=>e.jsxs(g.div,{className:"flex items-start p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:[e.jsx(O,{className:"h-4 w-4 mt-1 mr-3 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-blue-100",children:t})]},s))})]})]},"details"),"comparison"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(y,{className:"h-5 w-5 mr-2 text-blue-400"}),"Path Efficiency Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-primary-800 border border-primary-600 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.optimalPathComparison.totalSteps}),e.jsx("div",{className:"text-sm text-primary-300",children:"Your Steps"})]}),e.jsxs("div",{className:"p-4 bg-primary-800 border border-primary-600 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.optimalPathComparison.optimalSteps}),e.jsx("div",{className:"text-sm text-primary-300",children:"Optimal Steps"})]}),e.jsxs("div",{className:"p-4 bg-primary-800 border border-primary-600 rounded-lg text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${p(t.optimalPathComparison.efficiencyPercentage)}`,children:[t.optimalPathComparison.efficiencyPercentage,"%"]}),e.jsx("div",{className:"text-sm text-primary-300",children:"Efficiency"})]})]})]}),t.optimalPathComparison.missedOptimalChoices.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-red-400"}),"Missed Opportunities"]}),e.jsx("div",{className:"space-y-3",children:t.optimalPathComparison.missedOptimalChoices.map((t,s)=>e.jsxs(g.div,{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*s},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"font-medium text-red-200",children:"Better Choice Available"}),e.jsxs("div",{className:"text-sm text-red-400 font-medium",children:[t.scoreImpact>0?"+":"",t.scoreImpact," points"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-primary-300 mb-1",children:"Your Choice:"}),e.jsx("div",{className:"text-red-200",children:t.userChoice})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-primary-300 mb-1",children:"Optimal Choice:"}),e.jsx("div",{className:"text-green-200",children:t.optimalChoice})]})]}),e.jsx("div",{className:"mt-2 text-sm text-primary-200",children:t.impactDescription})]},t.stepId))})]})]},"comparison")]})}),e.jsx("div",{className:"p-6 border-t border-primary-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(g.button,{onClick:r,className:"flex items-center justify-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Try Again"]}),l.length>0&&e.jsxs(g.button,{onClick:n,className:"flex items-center justify-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Next Scenario"]}),e.jsxs(g.button,{onClick:o,className:"flex items-center justify-center px-6 py-3 bg-primary-700 hover:bg-primary-600 text-white rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Return to Menu"]})]})})]})});var h,b},ce=({isOpen:t,onClose:r,currentScenarioId:a,currentStep:i,trainingMode:n,onToggleTrainingMode:o,onRequestHint:l})=>{const[c,d]=X.useState("hints"),[m,x]=X.useState(""),[p,h]=X.useState({}),f=[{id:"h1",scenarioId:a,stepId:i?.toString(),type:"best_practice",title:"Always Gather Information First",content:"Before jumping into solutions, always gather comprehensive information about the problem. Ask clarifying questions and use monitoring tools to understand the full scope of the issue.",when_to_show:"always",related_concepts:["troubleshooting","diagnostics","methodology"]},{id:"h2",scenarioId:a,type:"methodology",title:"Systematic Troubleshooting Approach",content:"Follow a structured approach: 1) Define the problem, 2) Gather information, 3) Identify possible causes, 4) Test solutions, 5) Implement and monitor. This reduces resolution time and improves success rates.",when_to_show:"on_mistake",related_concepts:["methodology","best_practice"]},{id:"h3",scenarioId:a,type:"tool_usage",title:"PRTG Monitoring Best Practices",content:"When using PRTG, check sensor history for patterns, review thresholds, and correlate multiple sensors. Red sensors indicate critical issues, yellow shows warnings, and green means normal operation.",when_to_show:"always",related_concepts:["prtg","monitoring","network"]},{id:"h4",scenarioId:a,type:"communication",title:"Managing Client Expectations",content:"Keep clients informed throughout the process. Acknowledge their concerns, provide realistic timeframes, and explain your troubleshooting steps in simple terms. This builds trust and reduces anxiety.",when_to_show:"always",related_concepts:["communication","client_management"]},{id:"h5",scenarioId:a,type:"escalation",title:"When to Escalate Issues",content:"Escalate when: the issue is beyond your skill level, requires specialized access/tools, impacts critical business functions, or when your troubleshooting attempts could cause more damage.",when_to_show:"on_delay",related_concepts:["escalation","risk_management"]}],b={background:"You are working as a Level 1 IT Support technician at a medium-sized accounting firm during tax season.",industryContext:"Accounting firms have strict compliance requirements and operate under intense time pressure during tax season. Network issues can result in missed deadlines and potential regulatory violations.",businessImpact:["Revenue loss: $500-2000 per hour during outages","Compliance risk: IRS filing deadlines cannot be missed","Client trust: Accounting firms must maintain high reliability","Staff productivity: 200+ users affected by network issues"],stakeholders:["Partners (highest priority, direct client responsibility)","Senior Managers (project oversight)","Staff Accountants (end users)","IT Manager (your direct supervisor)","Clients (external, indirectly affected)"],escalationPath:["Level 1 Support (You) → Level 2 Support","Level 2 Support → IT Manager","IT Manager → External IT Consultant","Emergency: Direct to IT Manager"]},w=e=>{h(t=>({...t,[e]:!t[e]}))},j=Object.entries({PRTG:{definition:"Paessler Router Traffic Grapher - A network monitoring software that tracks network performance, bandwidth usage, and system uptime.",examples:["Monitoring server CPU usage","Tracking network bandwidth","Alert notifications for downtime"],relatedTerms:["SNMP","Network Monitoring","Sensors"],category:"network"},PuTTY:{definition:"A free and open-source terminal emulator, serial console, and network file transfer application that supports SSH, Telnet, and other protocols.",examples:["SSH connections to Linux servers","Serial console access","Telnet sessions"],relatedTerms:["SSH","Telnet","Terminal","Remote Access"],category:"software"},SLA:{definition:"Service Level Agreement - A contract between a service provider and client that defines expected service levels, response times, and remedies for non-compliance.",examples:["99.9% uptime guarantee","4-hour response time","Maximum 2-hour resolution time"],relatedTerms:["Uptime","Response Time","Availability"],category:"general"},RTO:{definition:"Recovery Time Objective - The maximum acceptable length of time that a computer, system, network, or application can be down after a failure occurs.",examples:["Email system RTO: 2 hours","Critical database RTO: 30 minutes","File server RTO: 4 hours"],relatedTerms:["RPO","Disaster Recovery","Business Continuity"],category:"general"},Escalation:{definition:"The process of transferring a support ticket to a higher level of support when the current level cannot resolve the issue within defined parameters.",examples:["Hardware failure requiring replacement","Complex network routing issues","Security incidents"],relatedTerms:["Tiers","Support Levels","Handoff"],category:"general"}}).filter(([e,t])=>e.toLowerCase().includes(m.toLowerCase())||t.definition.toLowerCase().includes(m.toLowerCase())),S=t=>{switch(t){case"best_practice":return e.jsx(s,{className:"h-4 w-4"});case"methodology":return e.jsx(y,{className:"h-4 w-4"});case"tool_usage":return e.jsx(T,{className:"h-4 w-4"});case"communication":return e.jsx(G,{className:"h-4 w-4"});case"escalation":return e.jsx(N,{className:"h-4 w-4"});default:return e.jsx(U,{className:"h-4 w-4"})}},k=e=>{switch(e){case"best_practice":return"text-green-400 bg-green-500/10 border-green-500/20";case"methodology":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"tool_usage":return"text-yellow-400 bg-yellow-500/10 border-yellow-500/20";case"communication":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"escalation":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-primary-400 bg-primary-500/10 border-primary-500/20"}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(g.div,{className:"bg-primary-900 border border-primary-700 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsxs("div",{className:"p-6 border-b border-primary-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-6 w-6 text-blue-400 mr-3"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Help & Training Mode"})]}),e.jsx("button",{onClick:r,className:"p-2 text-primary-400 hover:text-white transition-colors rounded-lg hover:bg-primary-700",children:e.jsx(v,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex space-x-4 mt-6",children:[{key:"hints",label:"Hints & Tips",icon:U},{key:"context",label:"Real-World Context",icon:_},{key:"glossary",label:"Technical Glossary",icon:R},{key:"settings",label:"Training Settings",icon:H}].map(({key:t,label:s,icon:r})=>e.jsxs("button",{onClick:()=>d(t),className:"flex items-center px-4 py-2 rounded-lg transition-colors "+(c===t?"bg-blue-600 text-white":"bg-primary-700 text-primary-300 hover:bg-primary-600 hover:text-white"),children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),s]},t))})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:e.jsxs(u,{mode:"wait",children:["hints"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Available Hints"}),e.jsx("p",{className:"text-primary-300 text-sm",children:"These hints can help you improve your troubleshooting approach and learn best practices."})]}),f.map(t=>e.jsxs(g.div,{className:`p-4 rounded-lg border ${k(t.type)}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*f.indexOf(t)},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[S(t.type),e.jsx("h4",{className:"font-medium text-white ml-2",children:t.title})]}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-primary-700 text-primary-300 capitalize",children:t.type.replace("_"," ")})]}),e.jsx("p",{className:"text-primary-100 text-sm mb-3",children:t.content}),t.related_concepts.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.related_concepts.map(t=>e.jsx("span",{className:"text-xs px-2 py-1 bg-primary-600 text-primary-200 rounded-full",children:t},t))})]},t.id))]},"hints"),"context"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(_,{className:"h-5 w-5 mr-2 text-blue-400"}),"Scenario Background"]}),e.jsx("p",{className:"text-primary-200 bg-primary-800 p-4 rounded-lg border border-primary-600",children:b.background})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[e.jsx(H,{className:"h-5 w-5 mr-2 text-green-400"}),"Industry Context"]}),e.jsx("p",{className:"text-primary-200 bg-primary-800 p-4 rounded-lg border border-primary-600",children:b.industryContext})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w("business-impact"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Business Impact"]}),p["business-impact"]?e.jsx(W,{className:"h-4 w-4 text-primary-400"}):e.jsx(B,{className:"h-4 w-4 text-primary-400"})]}),e.jsx(u,{children:p["business-impact"]&&e.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-3 space-y-2",children:b.businessImpact.map((t,s)=>e.jsxs("div",{className:"flex items-start p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[e.jsx(N,{className:"h-4 w-4 mt-1 mr-3 text-yellow-400 flex-shrink-0"}),e.jsx("span",{className:"text-yellow-100 text-sm",children:t})]},s))})})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w("stakeholders"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[e.jsx(G,{className:"h-5 w-5 mr-2 text-purple-400"}),"Key Stakeholders"]}),p.stakeholders?e.jsx(W,{className:"h-4 w-4 text-primary-400"}):e.jsx(B,{className:"h-4 w-4 text-primary-400"})]}),e.jsx(u,{children:p.stakeholders&&e.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-3 space-y-2",children:b.stakeholders.map((t,s)=>e.jsxs("div",{className:"flex items-start p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[e.jsx(G,{className:"h-4 w-4 mt-1 mr-3 text-purple-400 flex-shrink-0"}),e.jsx("span",{className:"text-purple-100 text-sm",children:t})]},s))})})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w("escalation"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[e.jsx(y,{className:"h-5 w-5 mr-2 text-blue-400"}),"Escalation Path"]}),p.escalation?e.jsx(W,{className:"h-4 w-4 text-primary-400"}):e.jsx(B,{className:"h-4 w-4 text-primary-400"})]}),e.jsx(u,{children:p.escalation&&e.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-3 space-y-2",children:b.escalationPath.map((t,s)=>e.jsxs("div",{className:"flex items-start p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-blue-600 text-white text-sm flex items-center justify-center mr-3 flex-shrink-0 mt-0.5",children:s+1}),e.jsx("span",{className:"text-blue-100 text-sm",children:t})]},s))})})]})]},"context"),"glossary"===c&&e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"h-4 w-4 text-primary-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search terms...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-primary-800 border border-primary-600 rounded-lg text-white placeholder-primary-400 focus:outline-none focus:border-blue-500"})]})})}),e.jsx("div",{className:"space-y-3",children:j.map(([t,s])=>e.jsxs(g.div,{className:"p-4 bg-primary-800 border border-primary-600 rounded-lg",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:t}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-600 text-blue-100 capitalize",children:s.category})]}),e.jsx("p",{className:"text-primary-200 mb-3",children:s.definition}),s.examples.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-primary-300 mb-1",children:"Examples:"}),e.jsx("ul",{className:"text-sm text-primary-200 space-y-1",children:s.examples.map((t,s)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),t]},s))})]}),s.relatedTerms.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-primary-300",children:"Related:"}),s.relatedTerms.map(t=>e.jsx("span",{className:"text-xs px-2 py-1 bg-primary-600 text-primary-200 rounded-full",children:t},t))]})]},t))}),0===j.length&&e.jsxs("div",{className:"text-center py-8 text-primary-400",children:['No terms found matching "',m,'"']})]},"glossary"),"settings"===c&&e.jsx(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training Mode Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-800 border border-primary-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Enable Training Mode"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Show additional help and explanations throughout scenarios"})]}),e.jsx("button",{onClick:()=>o({enabled:!n.enabled}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.enabled?"bg-blue-600":"bg-primary-600"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.enabled?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-800 border border-primary-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Show Hints"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Display contextual hints based on your actions"})]}),e.jsx("button",{onClick:()=>o({showHints:!n.showHints}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.showHints?"bg-blue-600":"bg-primary-600"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.showHints?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-800 border border-primary-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Explain Choices"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Show why certain choices are better than others"})]}),e.jsx("button",{onClick:()=>o({explainChoices:!n.explainChoices}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.explainChoices?"bg-blue-600":"bg-primary-600"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.explainChoices?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-800 border border-primary-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Real-World Context"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Display background information about the scenario"})]}),e.jsx("button",{onClick:()=>o({showRealWorldContext:!n.showRealWorldContext}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.showRealWorldContext?"bg-blue-600":"bg-primary-600"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.showRealWorldContext?"translate-x-6":"translate-x-1")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-800 border border-primary-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Pause on Mistakes"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Pause the scenario to explain when you make a mistake"})]}),e.jsx("button",{onClick:()=>o({pauseOnMistakes:!n.pauseOnMistakes}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.pauseOnMistakes?"bg-blue-600":"bg-primary-600"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.pauseOnMistakes?"translate-x-6":"translate-x-1")})})]})]})]})},"settings")]})})]})}):null},de=({dialog:t})=>{if(!t.isOpen)return null;const s=(()=>{switch(t.variant){case"danger":return{icon:N,iconColor:"text-red-400",bgColor:"bg-red-500/10 border-red-500/20",confirmBg:"bg-red-600 hover:bg-red-700",cancelBg:"bg-primary-700 hover:bg-primary-600"};case"warning":return{icon:N,iconColor:"text-yellow-400",bgColor:"bg-yellow-500/10 border-yellow-500/20",confirmBg:"bg-yellow-600 hover:bg-yellow-700",cancelBg:"bg-primary-700 hover:bg-primary-600"};default:return{icon:H,iconColor:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",confirmBg:"bg-blue-600 hover:bg-blue-700",cancelBg:"bg-primary-700 hover:bg-primary-600"}}})(),r=s.icon;return e.jsx(u,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:e.jsxs(g.div,{className:"bg-primary-900 border border-primary-700 rounded-lg max-w-md w-full",initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},transition:{duration:.2,ease:"easeOut"},children:[e.jsx("div",{className:"p-6 border-b border-primary-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full border ${s.bgColor} mr-4`,children:e.jsx(r,{className:`h-6 w-6 ${s.iconColor}`})}),e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.title})})]})}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-primary-200",children:t.message})}),e.jsx("div",{className:"p-6 border-t border-primary-700",children:e.jsxs("div",{className:"flex space-x-3 justify-end",children:[e.jsx(g.button,{onClick:t.onCancel,className:`px-4 py-2 rounded-lg text-white transition-colors ${s.cancelBg}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:t.cancelText}),e.jsx(g.button,{onClick:t.onConfirm,className:`px-4 py-2 rounded-lg text-white transition-colors ${s.confirmBg}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:t.confirmText})]})})]})})})},me="rtp_simulator_progress",xe="1.0.0";class pe{static saveProgress(e,t,s,r){try{const a={timestamp:new Date,gameState:{...e,currentScenario:null},currentScenarioProgress:s?{scenarioId:s,stepIndex:r||0,chatMessages:t||[],timeElapsed:e.currentScenario?Math.floor((Date.now()-e.currentScenario.startTime.getTime())/1e3):0}:void 0,version:xe};return localStorage.setItem(me,JSON.stringify(a)),!0}catch(a){return!1}}static loadProgress(){try{const e=localStorage.getItem(me);if(!e)return null;const t=JSON.parse(e);return t.version&&t.version===xe?(t.timestamp=new Date(t.timestamp),t.currentScenarioProgress?.chatMessages&&(t.currentScenarioProgress.chatMessages=t.currentScenarioProgress.chatMessages.map(e=>({...e,timestamp:new Date(e.timestamp)}))),t):(this.clearProgress(),null)}catch(e){return null}}static clearProgress(){localStorage.removeItem(me)}static hasProgress(){return null!==localStorage.getItem(me)}static clearScenarioProgress(){try{const e=this.loadProgress();if(!e)return!1;const t={...e,currentScenarioProgress:void 0};return localStorage.setItem(me,JSON.stringify(t)),!0}catch(e){return!1}}static exportProgress(){const e=this.loadProgress();if(!e)throw new Error("No progress data to export");return JSON.stringify(e,null,2)}static importProgress(e){try{const t=JSON.parse(e);if(!t.gameState||!t.version||!t.timestamp)throw new Error("Invalid progress data format");return localStorage.setItem(me,JSON.stringify(t)),!0}catch(t){return!1}}static getAutoSaveInterval(){return 3e4}static autoSave(e,t,s,r){(e.sessionStats.sessionsCompleted>0||e.userProgress.completedScenarios.length>0||s&&t&&t.length>3)&&this.saveProgress(e,t,s,r)}}function he(){const[t,s]=X.useState("home"),[r,i]=X.useState(null),[n,l]=X.useState(!1),[c,d]=X.useState(!1),[p,f]=X.useState(!1),[b,w]=X.useState(!1),[j,N]=X.useState(!1),[S,k]=X.useState(!0),[C,T]=X.useState([]),[P,I]=X.useState(null),[A,M]=X.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},onCancel:()=>{},variant:"info"}),[D,R]=X.useState({enabled:!0,showHints:!0,explainChoices:!0,showRealWorldContext:!0,pauseOnMistakes:!1}),O=X.useRef(null),[L,U]=X.useState({currentScenario:null,userProgress:{completedScenarios:["3"],totalScore:85,skillLevels:{network:75,security:60,hardware:90,software:70,telephony:85,infrastructure:65},achievements:[{id:"first_steps",name:"First Steps",description:"Completed your first IT support scenario",icon:"🚀",criteria:{minScore:50},rarity:"common"},{id:"hardware_expert",name:"Hardware Expert",description:"Successfully diagnosed hardware failures",icon:"🔧",criteria:{minScore:70,specificActions:["hardware_diagnosis"]},rarity:"uncommon"}],certifications:[{level:"bronze",requirements:["Complete 3 scenarios with 70+ score"],earned:!0}],totalTimeSpent:240,averageResolutionTime:25,bestPracticesScore:78,clientSatisfactionAverage:4.2,escalationAccuracy:85},globalSettings:{hintsEnabled:!0,timerEnabled:!0,difficultyMode:"learning"},sessionStats:{sessionsCompleted:3,totalTime:240,averageScore:75}}),[_,H]=X.useState(0),[W,B]=X.useState("neutral"),[G,Y]=X.useState(0),[K,Q]=X.useState({prtg:!1,putty:!1});X.useEffect(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]);const ee=e=>{i(e),s("chat");const t=m[e.id]||[],r=new x(e,t);O.current=r;const a=r.getCurrentState();U(e=>({...e,currentScenario:a})),H(r.getProgress()),B(a.clientMood),Y(a.score.total),Q({prtg:r.canAccessTool("prtg"),putty:r.canAccessTool("putty")});const n=t[0];T([{id:"1",type:"system",content:`🎯 SCENARIO: "${e.title}" | Difficulty: ${e.difficulty.toUpperCase()} | Users Affected: ${e.usersAffected}`,timestamp:new Date,sender:"System"},{id:"2",type:"system",content:`📋 OBJECTIVES: ${e.objectives.join(", ")}`,timestamp:new Date,sender:"System"},{id:"3",type:"client",content:n?.clientResponse||e.description,timestamp:new Date,sender:"Client",mood:a.clientMood,toolHint:"none"!==n?.toolSuggestion?`Suggested tool: ${n?.toolSuggestion}`:void 0}])},te=e=>{const t={id:Date.now().toString(),type:"user",content:e,timestamp:new Date,sender:"You"};if(T(e=>[...e,t]),!O.current||!r)return;const s=O.current.processUserAction(e,"response"),a=O.current.getCurrentState();U(e=>({...e,currentScenario:a})),H(O.current.getProgress()),B(s.moodChange),Y(a.score.total),Q({prtg:O.current.canAccessTool("prtg"),putty:O.current.canAccessTool("putty")});const i=O.current.advanceConversationStep();setTimeout(()=>{let e,t=s.feedback;i&&(t=i.clientResponse,e="none"!==i.toolSuggestion?`Suggested tool: ${i.toolSuggestion}`:void 0);const r={id:(Date.now()+1).toString(),type:"client",content:t,timestamp:new Date,sender:"Client",mood:s.moodChange,toolHint:e,scoreImpact:s.scoreChange,isOptimal:s.scoreChange>0};T(e=>[...e,r]),O.current&&O.current.getProgress()>=100&&setTimeout(()=>{const e=O.current.completeScenario();me(e)},2e3)},1500)},se=(e,t)=>{if(!O.current)return;const s=O.current.accessTool(e,t),r=O.current.getCurrentState();U(e=>({...e,currentScenario:r})),H(O.current.getProgress()),B(s.moodChange),Y(r.score.total),Q({prtg:O.current.canAccessTool("prtg"),putty:O.current.canAccessTool("putty")});const a={id:Date.now().toString(),type:"system",content:`🔧 Tool accessed: ${e.toUpperCase()} | Score impact: ${s.scoreChange>0?"+":""}${s.scoreChange}`,timestamp:new Date,sender:"System",scoreImpact:s.scoreChange,isOptimal:s.scoreChange>0};T(e=>[...e,a]),s.feedback&&setTimeout(()=>{const e={id:(Date.now()+1).toString(),type:"assistant",content:s.feedback,timestamp:new Date,sender:"IT Support"};T(t=>[...t,e])},1e3)},me=e=>{if(!r||!O.current)return;const t=O.current.getCurrentState(),s=Math.floor((Date.now()-t.startTime.getTime())/1e3),a={totalSteps:t.decisionHistory.length,optimalSteps:r.optimalPath.length,efficiencyPercentage:Math.round(r.optimalPath.length/Math.max(t.decisionHistory.length,1)*100),missedOptimalChoices:t.decisionHistory.filter(e=>!e.wasOptimal).slice(0,3).map(e=>({stepId:e.stepId,userChoice:e.action,optimalChoice:r.optimalPath.find(t=>t.id===e.stepId)?.action||"Unknown",impactDescription:`This choice resulted in ${e.scoreImpact} point impact and ${e.consequences.join(", ")}`,scoreImpact:e.scoreImpact})),extraStepsReason:t.mistakesMade.map(e=>e.description)},i={overall:e.finalScore>=90?"excellent":e.finalScore>=75?"good":e.finalScore>=60?"satisfactory":e.finalScore>=40?"needs_improvement":"poor",strengths:e.feedback.strengths,weaknesses:e.feedback.improvements,timeEfficiency:Math.min(100,Math.round(300/Math.max(s,1)*100)),communicationScore:Math.round(t.score.breakdown.clientSatisfaction),technicalAccuracy:Math.round(t.score.breakdown.accuracy),troubleshootingMethodology:Math.round(t.score.breakdown.efficiency)},n={scenarioId:r.id,completionTime:new Date,totalTimeElapsed:s,finalScore:e.finalScore,clientSatisfactionScore:Math.round(t.score.breakdown.clientSatisfaction/20),pathTaken:t.decisionHistory,optimalPathComparison:a,performanceSummary:i,areasForImprovement:e.feedback.improvements,badges:e.badgesEarned,nextRecommendations:e.feedback.recommendedTraining};I(n),w(!0);const o=J.updateUserProgress(L.userProgress,r,t);U(e=>({...e,userProgress:o,currentScenario:null})),pe.saveProgress(L,C,r.id)};((e,t,s,r)=>{Z.useEffect(()=>{const a=setInterval(()=>{pe.autoSave(e,t,s,r)},pe.getAutoSaveInterval());return()=>clearInterval(a)},[e,t,s,r])})(L,C,r?.id,_),X.useEffect(()=>{const e=pe.loadProgress();e&&(U(t=>({...t,...e.gameState})),e.currentScenarioProgress)},[]);return e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsx("header",{className:"bg-primary-900 border-b border-primary-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"h-8 w-8 text-success mr-3"}),e.jsx("h1",{className:"text-xl font-bold",children:"IT Support Training Simulator"})]}),e.jsxs("nav",{className:"hidden md:flex space-x-4",children:[e.jsxs("button",{onClick:()=>s("home"),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors "+("home"===t?"bg-primary-700 text-white":"text-primary-300 hover:text-white hover:bg-primary-800"),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Scenarios"]}),"chat"===t&&e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-primary-300 hover:text-white hover:bg-primary-800 transition-colors",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"PRTG Monitor"]}),"chat"===t&&e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-primary-300 hover:text-white hover:bg-primary-800 transition-colors",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Terminal"]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-primary-300 hover:text-white hover:bg-primary-800 transition-colors",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Progress"]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-primary-300 hover:text-white hover:bg-primary-800 transition-colors",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Help"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:["chat"===t&&r&&e.jsxs("button",{onClick:()=>{r&&M({isOpen:!0,title:"End Current Scenario?",message:`Are you sure you want to end "${r.title}"? Your progress will be lost and you'll return to the scenario selection.`,confirmText:"End Scenario",cancelText:"Continue",variant:"warning",onConfirm:()=>{i(null),s("home"),T([]),H(0),Y(0),B("neutral"),Q({prtg:!1,putty:!1}),O.current=null,U(e=>({...e,currentScenario:null})),pe.clearScenarioProgress(),M(e=>({...e,isOpen:!1}))},onCancel:()=>{M(e=>({...e,isOpen:!1}))}})},className:"flex items-center px-3 py-2 rounded-md text-sm font-medium bg-red-600 hover:bg-red-700 text-white transition-colors",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"End Scenario"]}),e.jsx("button",{onClick:()=>k(!S),className:"p-2 rounded-md text-primary-300 hover:text-white hover:bg-primary-800 transition-colors",children:e.jsx(q,{className:"h-5 w-5"})})]})]})})}),e.jsx(u,{children:"chat"===t&&L.currentScenario&&e.jsx(g.div,{className:"bg-primary-800 border-b border-primary-700",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between py-3 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6 flex-1",children:[e.jsxs(g.div,{className:"flex items-center space-x-2 min-w-0",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[e.jsx(y,{className:"h-4 w-4 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-primary-300 whitespace-nowrap",children:"Progress:"}),e.jsx("div",{className:"w-16 sm:w-24 bg-primary-700 rounded-full h-2 flex-shrink-0",children:e.jsx(g.div,{className:"bg-blue-500 h-2 rounded-full",initial:{width:0},animate:{width:`${_}%`},transition:{duration:.8,ease:"easeOut"}})}),e.jsxs(g.span,{className:"text-sm text-white font-medium tabular-nums",initial:{scale:1.2},animate:{scale:1},transition:{duration:.2},children:[Math.round(_),"%"]},_)]}),e.jsxs(g.div,{className:"flex items-center space-x-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx(g.div,{className:"h-3 w-3 rounded-full flex-shrink-0 "+("panicked"===W?"bg-red-500":"angry"===W?"bg-red-400":"frustrated"===W?"bg-yellow-500":"neutral"===W?"bg-gray-400":"cooperative"===W?"bg-blue-400":"satisfied"===W?"bg-green-400":"bg-green-500"),animate:{scale:"panicked"===W||"angry"===W?[1,1.2,1]:1},transition:{repeat:"panicked"===W||"angry"===W?1/0:0,duration:.8}}),e.jsx("span",{className:"text-sm text-primary-300 whitespace-nowrap",children:"Client:"}),e.jsxs(g.span,{className:"text-sm text-white capitalize",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},children:[W,e.jsx("span",{className:"ml-1",children:"panicked"===W?"😱":"angry"===W?"😡":"frustrated"===W?"😤":"neutral"===W?"😐":"cooperative"===W?"🙂":"satisfied"===W?"😊":"grateful"===W?"😍":"😐"})]},W)]}),e.jsxs(g.div,{className:"flex items-center space-x-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:[e.jsx(E,{className:"h-4 w-4 text-yellow-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-primary-300 whitespace-nowrap",children:"Score:"}),e.jsx(g.span,{className:"text-sm font-medium tabular-nums "+(G>=70?"text-green-400":G>=40?"text-yellow-400":"text-red-400"),initial:{scale:1.2,y:-5},animate:{scale:1,y:0},transition:{duration:.3,type:"spring"},children:G},G)]}),e.jsxs(g.div,{className:"flex items-center space-x-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},children:[e.jsx(a,{className:"h-4 w-4 text-purple-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-primary-300 whitespace-nowrap",children:"Time:"}),e.jsxs("span",{className:"text-sm text-white tabular-nums",children:[L.currentScenario?Math.floor((Date.now()-L.currentScenario.startTime.getTime())/6e4):0,"m"]})]})]}),e.jsxs(g.div,{className:"flex items-center space-x-2 flex-shrink-0",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},children:[e.jsx("span",{className:"text-sm text-primary-300 whitespace-nowrap hidden sm:inline",children:"Tools:"}),e.jsxs(g.button,{onClick:()=>K.prtg&&se("prtg"),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 "+(K.prtg?"bg-green-600 text-white hover:bg-green-700 hover:scale-105 active:scale-95":"bg-primary-600 text-primary-300 cursor-not-allowed"),disabled:!K.prtg,whileHover:K.prtg?{scale:1.05}:{},whileTap:K.prtg?{scale:.95}:{},children:["PRTG",K.prtg&&L.currentScenario?.toolsAccessed.prtgChecked&&e.jsx(g.span,{initial:{scale:0},animate:{scale:1},className:"ml-1 text-green-200",children:"✓"})]}),e.jsxs(g.button,{onClick:()=>K.putty&&se("putty"),className:"px-2 py-1 rounded text-xs font-medium transition-all duration-200 "+(K.putty?"bg-green-600 text-white hover:bg-green-700 hover:scale-105 active:scale-95":"bg-primary-600 text-primary-300 cursor-not-allowed"),disabled:!K.putty,whileHover:K.putty?{scale:1.05}:{},whileTap:K.putty?{scale:.95}:{},children:["PuTTY",K.putty&&L.currentScenario?.toolsAccessed.puttyChecked&&e.jsx(g.span,{initial:{scale:0},animate:{scale:1},className:"ml-1 text-green-200",children:"✓"})]})]})]})})})}),e.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(()=>{switch(t){case"home":default:return e.jsx(re,{scenarios:V,onSelectScenario:ee,userProgress:L.userProgress});case"chat":return r?e.jsx(ae,{scenario:r,messages:C,onSendMessage:te,onBack:()=>s("home"),onToolAccess:se}):null}})()}),n&&r&&e.jsx(ie,{scenarioId:r.id,onClose:()=>l(!1),onSensorClick:e=>{const t={id:Date.now().toString(),type:"system",content:`PRTG Alert: Clicked on sensor "${e.name}" - Status: ${e.status}, Value: ${e.value}. Message: ${e.message}`,timestamp:new Date,sender:"PRTG System"};T(e=>[...e,t]),l(!1)}}),c&&e.jsx(ne,{onClose:()=>d(!1),scenarioId:r?.id}),p&&e.jsx(oe,{userProgress:L.userProgress,scenarios:V,onClose:()=>f(!1)}),b&&P&&e.jsx(le,{completion:P,onTryAgain:()=>{r&&(w(!1),I(null),ee(r))},onNextScenario:()=>{w(!1),I(null),s("home")},onReturnHome:()=>{w(!1),I(null),s("home")},availableNextScenarios:V.filter(e=>e.id!==r?.id&&!L.userProgress.completedScenarios.includes(e.id)).slice(0,3).map(e=>({id:e.id,title:e.title,difficulty:e.difficulty}))}),j&&e.jsx(ce,{isOpen:j,onClose:()=>N(!1),currentScenarioId:r?.id||"",currentStep:_,trainingMode:D,onToggleTrainingMode:e=>{R(t=>({...t,...e}))},onRequestHint:e=>{if(!O.current||!r)return;const t={id:Date.now().toString(),type:"system",content:`💡 HINT (${e.toUpperCase()}): Based on your current situation, consider checking the monitoring tools for additional information about the issue.`,timestamp:new Date,sender:"Training Assistant"};T(e=>[...e,t])}}),e.jsx(de,{dialog:A})]})}Q.createRoot(document.getElementById("root")).render(e.jsx(Z.StrictMode,{children:e.jsx(he,{})}));
